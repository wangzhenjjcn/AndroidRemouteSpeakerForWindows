<Window x:Class="AudioBridge.Windows.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="AudioBridge LAN" Height="500" Width="720">
  <DockPanel>
    <Menu DockPanel.Dock="Top">
      <MenuItem Header="文件(_F)">
        <MenuItem Header="生成配对二维码" Click="Menu_GenerateQr_Click"/>
        <Separator/>
        <MenuItem Header="退出" Click="Menu_Exit_Click"/>
      </MenuItem>
      <MenuItem Header="设置(_S)">
        <MenuItem x:Name="MenuUseEncryption" Header="使用加密(AES-GCM)" IsCheckable="True" Click="Menu_UseEncryption_Click"/>
        <MenuItem x:Name="MenuAutostart" Header="开机自启" IsCheckable="True" Click="Menu_Autostart_Click"/>
      </MenuItem>
      <MenuItem Header="帮助(_H)">
        <MenuItem Header="检查更新" Click="Menu_CheckUpdate_Click"/>
        <MenuItem Header="关于" Click="Menu_About_Click"/>
      </MenuItem>
    </Menu>
    <Grid Margin="16">
    <Grid.RowDefinitions>
      <RowDefinition Height="Auto"/>
      <RowDefinition Height="*"/>
      <RowDefinition Height="Auto"/>
    </Grid.RowDefinitions>

    <TextBlock Text="AudioBridge LAN" FontSize="20" FontWeight="Bold"/>

    <Border Grid.Row="1" Margin="0,12,0,12" Padding="12" BorderBrush="#DDD" BorderThickness="1" CornerRadius="6">
      <StackPanel>
        <TextBlock Text="音频源" FontWeight="SemiBold"/>
        <StackPanel Orientation="Horizontal" Margin="0,6,0,0">
          <TextBlock VerticalAlignment="Center" Text="播放设备："/>
          <ComboBox x:Name="DeviceCombo" Width="380" Margin="8,0,0,0"/>
          <Button x:Name="RefreshDevicesButton" Content="刷新" Width="72" Margin="8,0,0,0" Click="RefreshDevicesButton_Click"/>
        </StackPanel>

        <Separator Margin="0,12,0,12"/>

        <TextBlock Text="编码与网络" FontWeight="SemiBold"/>
        <StackPanel Orientation="Horizontal" Margin="0,6,0,0" VerticalAlignment="Center">
          <TextBlock VerticalAlignment="Center" Text="码率："/>
          <Slider x:Name="BitrateSlider" Minimum="64" Maximum="160" Value="96" Width="260" Margin="8,0,0,0" TickPlacement="BottomRight" IsSnapToTickEnabled="True" TickFrequency="8" ValueChanged="BitrateSlider_ValueChanged"/>
          <TextBlock x:Name="BitrateLabel" VerticalAlignment="Center" Margin="8,0,0,0" Text="96 kbps"/>
        </StackPanel>
        <CheckBox x:Name="UseOpusCheck" Content="使用 Opus 编码" Margin="0,6,0,0" IsChecked="False"/>

        <Separator Margin="0,12,0,12"/>

        <StackPanel Orientation="Horizontal">
          <Button x:Name="StartStopButton" Width="120" Height="32" Content="开始推流" Click="StartStopButton_Click"/>
          <TextBlock x:Name="StatusText" Margin="12,0,0,0" VerticalAlignment="Center" Text="状态：未推流"/>
        </StackPanel>

        <Separator Margin="0,12,0,12"/>
        <TextBlock Text="Web 服务 (浏览器播放)" FontWeight="SemiBold"/>
        <StackPanel Orientation="Horizontal" Margin="0,6,0,0">
          <CheckBox x:Name="WebEnabledCheck" Content="启用 Web 服务" VerticalAlignment="Center" Click="WebEnabledCheck_Click"/>
          <TextBlock VerticalAlignment="Center" Margin="12,0,0,0" Text="端口："/>
          <TextBox x:Name="WebPortBox" Width="80" Margin="8,0,0,0" Text="29763"/>
          <Button x:Name="OpenWebButton" Content="打开网页" Width="80" Margin="12,0,0,0" Click="OpenWebButton_Click" IsEnabled="False"/>
        </StackPanel>
        
        <Separator Margin="0,12,0,12"/>
        <TextBlock Text="测试远端 (本机回环示例)" FontWeight="SemiBold"/>
        <StackPanel Orientation="Horizontal" Margin="0,6,0,0">
          <TextBlock VerticalAlignment="Center" Text="目标IP："/>
          <TextBox x:Name="TargetIpBox" Width="180" Margin="8,0,0,0" Text="127.0.0.1"/>
          <TextBlock VerticalAlignment="Center" Margin="12,0,0,0" Text="端口："/>
          <TextBox x:Name="TargetPortBox" Width="80" Margin="8,0,0,0" Text="5004"/>
        </StackPanel>
      </StackPanel>
    </Border>

    <TextBlock Grid.Row="2" Foreground="#777" Text="提示：当前为基础控制界面，后续将接入 Opus 编码、UDP 推流与控制通道。"/>
    </Grid>
  </DockPanel>
</Window>


